!function(b){var a=function(d,c,f){if(f){f.stopPropagation();f.preventDefault()}this.$element=b(d);this.$newElement=null;this.button=null;this.options=b.extend({},b.fn.selectpicker.defaults,this.$element.data(),typeof c=="object"&&c);this.style=this.options.style;this.size=this.options.size;this.init()};a.prototype={constructor:a,init:function(m){this.$element.hide();var d=this.$element.attr("class")!==undefined?this.$element.attr("class").split(/\s+/):"";var p=this.getTemplate();var c=this.$element.attr("id");p=this.createLi(p);this.$element.after(p);this.$newElement=this.$element.next(".bootstrap-select");var o=this.$newElement;var f=this.$newElement.find(".dropdown-menu");var l=this.$newElement.find(".dropdown-menu ul li > a");var n=parseInt(l.css("line-height"))+l.outerHeight();var h=this.$newElement.offset().top;var r=0;var g=0;var k=this.$newElement.outerHeight();this.button=this.$newElement.find("> button");if(c!==undefined){this.button.attr("id",c);b('label[for="'+c+'"]').click(function(){o.find("button#"+c).focus()})}for(var j=0;j<d.length;j++){if(d[j]!="selectpicker"){this.$newElement.addClass(d[j])}}this.button.addClass(this.style);this.checkDisabled();this.checkTabIndex();this.clickListener();if(this.size=="auto"){function q(){var e=h-b(window).scrollTop();var t=window.innerHeight;var i=parseInt(f.css("padding-top"))+parseInt(f.css("padding-bottom"))+parseInt(f.css("border-top-width"))+parseInt(f.css("border-bottom-width"))+parseInt(f.css("margin-top"))+parseInt(f.css("margin-bottom"))+2;var s=t-e-k-i;if(!o.hasClass("dropup")){r=Math.floor(s/n)}else{r=Math.floor((e-i)/n)}if(r<4){r=3}g=n*r;if(f.find("ul li").length+f.find("dt").length>r){f.find("ul").css({"max-height":g+"px","overflow-y":"scroll"})}else{f.find("ul").css({"max-height":"none","overflow-y":"auto"})}}q();b(window).resize(q);b(window).scroll(q)}else{if(this.size&&this.size!="auto"&&f.find("ul li").length>this.size){g=n*this.size;if(this.size==1){g=g+8}f.find("ul").css({"max-height":g+"px","overflow-y":"scroll"})}}this.$element.bind("DOMNodeInserted",b.proxy(this.reloadLi,this));this.$element.bind("DOMNodeInserted",q)},getTemplate:function(){var c="<div class='btn-group bootstrap-select'><button class='btn dropdown-toggle clearfix' data-toggle='dropdown'><span class='filter-option pull-left'>__SELECTED_OPTION</span>&nbsp;<span class='caret'></span></button><div class='dropdown-menu' role='menu'><ul>__ADD_LI</ul></div></div>";return c},reloadLi:function(){var e=[];var f=[];var c="";this.$newElement.find("li").remove();this.$element.find("option").each(function(){e.push(b(this).text())});this.$element.find("option").each(function(){if(b(this).parent().is("optgroup")){if(b(this).index()==0){if(b(this)[0].index!=0){f.push('<dt class="optgroup-div">'+b(this).parent().attr("label")+'</dt><a tabindex="-1" href="#" class="opt">'+b(this).text()+"</a>")}else{f.push("<dt>"+b(this).parent().attr("label")+'</dt><a tabindex="-1" href="#" class="opt">'+b(this).text()+"</a>")}}else{f.push('<a tabindex="-1" href="#" class="opt">'+b(this).text()+"</a>")}}else{f.push('<a tabindex="-1" href="#">'+b(this).text()+"</a>")}});if(e.length>0){for(var d=0;d<e.length;d++){this.$newElement.find("ul").append("<li rel="+d+">"+f[d]+"</li>")}}},createLi:function(f){var e=[];var j=[];var c="";var h=this;var g=this.$element[0].selectedIndex?this.$element[0].selectedIndex:0;this.$element.find("option").each(function(){e.push(b(this).text())});this.$element.find("option").each(function(){if(b(this).parent().is("optgroup")){if(b(this).index()==0){if(b(this)[0].index!=0){j.push('<dt class="optgroup-div">'+b(this).parent().attr("label")+'</dt><a tabindex="-1" href="#" class="opt">'+b(this).text()+"</a>")}else{j.push("<dt>"+b(this).parent().attr("label")+'</dt><a tabindex="-1" href="#" class="opt">'+b(this).text()+"</a>")}}else{j.push('<a tabindex="-1" href="#" class="opt">'+b(this).text()+"</a>")}}else{j.push('<a tabindex="-1" href="#">'+b(this).text()+"</a>")}});if(e.length>0){f=f.replace("__SELECTED_OPTION",e[g]);for(var d=0;d<e.length;d++){c+="<li rel="+d+">"+j[d]+"</li>"}}this.$element.find("option").eq(g).prop("selected",true);f=f.replace("__ADD_LI",c);return f},checkDisabled:function(){if(this.$element.is(":disabled")){this.button.addClass("disabled");this.button.click(function(c){c.preventDefault()})}},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var c=this.$element.attr("tabindex");this.button.attr("tabindex",c)}},clickListener:function(){b("body").on("touchstart.dropdown",".dropdown-menu",function(c){c.stopPropagation()});b(".dropdown-menu").find("li dt").on("click",function(c){c.stopPropagation()});b(this.$newElement).on("click","li a",function(g){g.preventDefault();var d=b(this).parent().index(),f=b(this).parent(),c=f.parents(".bootstrap-select");if(c.prev("select").not(":disabled")){c.prev("select").find("option").removeAttr("selected");c.prev("select").find("option").eq(d).prop("selected",true).attr("selected","selected");c.find(".filter-option").html(f.text());c.find("button").focus();c.prev("select").trigger("change")}});this.$element.on("change",function(c){if(b(this).find("option:selected").attr("title")!=undefined){b(this).next(".bootstrap-select").find(".filter-option").html(b(this).find("option:selected").attr("title"))}else{b(this).next(".bootstrap-select").find(".filter-option").html(b(this).find("option:selected").text())}})}};b.fn.selectpicker=function(c,d){return this.each(function(){var g=b(this),f=g.data("selectpicker"),e=typeof c=="object"&&c;if(!f){g.data("selectpicker",(f=new a(this,e,d)))}if(typeof c=="string"){f[c]()}})};b.fn.selectpicker.defaults={style:null,size:"auto"}}(window.jQuery);