!function(c){var k=function(a,b,d){d&&(d.stopPropagation(),d.preventDefault());this.$element=c(a);this.button=this.$newElement=null;this.options=c.extend({},c.fn.selectpicker.defaults,this.$element.data(),"object"==typeof b&&b);this.style=this.options.style;this.size=this.options.size;this.init()};k.prototype={constructor:k,init:function(){this.$element.hide();var a=void 0!==this.$element.attr("class")?this.$element.attr("class").split(/\s+/):"",b=this.getTemplate(),d=this.$element.attr("id"),b=this.createLi(b);
this.$element.after(b);var f=this.$newElement=this.$element.next(".bootstrap-select"),e=this.$newElement.find(".dropdown-menu"),b=this.$newElement.find(".dropdown-menu ul li > a"),g=parseInt(b.css("line-height"))+b.outerHeight(),h=this.$newElement.offset().top,l=0,j=0,k=this.$newElement.outerHeight();this.button=this.$newElement.find("> button");void 0!==d&&(this.button.attr("id",d),c('label[for="'+d+'"]').click(function(){f.find("button#"+d).focus()}));for(b=0;b<a.length;b++)"selectpicker"!=a[b]&&
this.$newElement.addClass(a[b]);this.button.addClass(this.style);this.checkDisabled();this.checkTabIndex();this.clickListener();this.$element.find("optgroup").each(function(){c(this).attr("label")&&e.find(".opt"+c(this).index()).eq(0).before("<dt>"+c(this).attr("label")+"</dt>");e.find(".opt"+c(this).index()).eq(0).parent().prev().addClass("optgroup-div")});"auto"==this.size?(a=function(){var a=h-c(window).scrollTop(),b=window.innerHeight,d=parseInt(e.css("padding-top"))+parseInt(e.css("padding-bottom"))+
parseInt(e.css("border-top-width"))+parseInt(e.css("border-bottom-width"))+parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom"))+2,b=b-a-k-d;l=f.hasClass("dropup")?Math.floor((a-d)/g):Math.floor(b/g);4>l&&(l=3);j=g*l;e.find("ul li").length+e.find("dt").length>l?e.find("ul").css({"max-height":j+"px","overflow-y":"scroll"}):e.find("ul").css({"max-height":"none","overflow-y":"auto"})},a(),c(window).resize(a),c(window).scroll(a)):this.size&&("auto"!=this.size&&e.find("ul li").length>this.size)&&
(j=g*this.size,1==this.size&&(j+=8),e.find("ul").css({"max-height":j+"px","overflow-y":"scroll"}));this.$element.bind("DOMNodeInserted",c.proxy(this.reloadLi,this))},getTemplate:function(){return"<div class='btn-group bootstrap-select'><button class='btn dropdown-toggle clearfix' data-toggle='dropdown'><span class='filter-option pull-left'>__SELECTED_OPTION</span>&nbsp;<span class='caret'></span></button><div class='dropdown-menu' role='menu'><ul>__ADD_LI</ul></div></div>"},reloadLi:function(){var a=
[];this.$newElement.find("li").remove();this.$element.find("option").each(function(){a.push(c(this).text())});if(0<a.length)for(var b=0;b<a.length;b++)this.$newElement.find("ul").append("<li rel="+b+'><a tabindex="-1" href="#">'+a[b]+"</a></li>")},createLi:function(a){var b=[],d=[],f="",e=null,g=this.$element[0].selectedIndex?this.$element[0].selectedIndex:0;this.$element.find("option").each(function(){b.push(c(this).text())});this.$element.find("option").each(function(){if(c(this).parent().is("optgroup")){e=
String(c(this).parent().index());for(var a=c(this).parent(),b=0;b<a.length;b++)d.push('<a class="opt'+e[b]+'" tabindex="-1" href="#">'+c(this).text()+"</a>")}else d.push('<a tabindex="-1" href="#">'+c(this).text()+"</a>")});if(0<b.length){a=a.replace("__SELECTED_OPTION",b[g]);for(var h=0;h<b.length;h++)f+="<li rel="+h+">"+d[h]+"</li>"}this.$element.find("option").eq(g).prop("selected",!0);return a=a.replace("__ADD_LI",f)},checkDisabled:function(){this.$element.is(":disabled")&&(this.button.addClass("disabled"),
this.button.click(function(a){a.preventDefault()}))},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var a=this.$element.attr("tabindex");this.button.attr("tabindex",a)}},clickListener:function(){c("body").on("touchstart.dropdown",".dropdown-menu",function(a){a.stopPropagation()});c(".dropdown-menu").find("li dt").on("click",function(a){a.stopPropagation()});c(this.$newElement).on("click","li a",function(a){a.preventDefault();a=c(this).parent().index();var b=c(this).parent(),d=b.parents(".bootstrap-select");
d.prev("select").not(":disabled")&&(d.prev("select").find("option").removeAttr("selected"),d.prev("select").find("option").eq(a).prop("selected",!0).attr("selected","selected"),d.find(".filter-option").html(b.text()),d.find("button").focus(),d.prev("select").trigger("change"))});this.$element.on("change",function(){void 0!=c(this).find("option:selected").attr("title")?c(this).next(".bootstrap-select").find(".filter-option").html(c(this).find("option:selected").attr("title")):c(this).next(".bootstrap-select").find(".filter-option").html(c(this).find("option:selected").text())})}};
c.fn.selectpicker=function(a,b){return this.each(function(){var d=c(this),f=d.data("selectpicker"),e="object"==typeof a&&a;f||d.data("selectpicker",f=new k(this,e,b));if("string"==typeof a)f[a]()})};c.fn.selectpicker.defaults={style:null,size:"auto"}}(window.jQuery);